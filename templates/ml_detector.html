<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Detector - Fraud Detection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">üõ°Ô∏è Fraud Detection</div>
            <ul class="nav-menu">
                <li><a href="/">Home</a></li>
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/analyze">Analyze</a></li>
                <li><a href="/ml-detector">ML Detector</a></li>
                <li><a href="/about">About</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>Machine Learning Fraud Detector</h1>
        
        <div class="ml-container">
            <!-- Training Section -->
            <div class="ml-section">
                <h2>1. Train ML Models</h2>
                <p>First, train the machine learning models with sample data.</p>
                
                <form id="trainingForm" style="display: flex; flex-direction: column; gap: 1rem;">
                    <div class="form-group">
                        <label for="sampleCount">Number of Training Samples</label>
                        <input type="number" id="sampleCount" name="sampleCount" value="100" min="10" max="500">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Train Models</button>
                </form>
                <div id="trainingStatus" class="status-message"></div>
                <div id="modelMetrics"></div>
            </div>

            <!-- Prediction Section -->
            <div class="ml-section">
                <h2>2. Make Predictions</h2>
                <p>Use trained models to predict fraud probability for new transactions.</p>
                
                <form id="predictionForm" style="display: flex; flex-direction: column; gap: 1rem;">
                    <div class="form-group">
                        <label for="pred_cardholder_id">Cardholder ID</label>
                        <input type="text" id="pred_cardholder_id" name="pred_cardholder_id" value="CH001">
                    </div>
                    
                    <div class="form-group">
                        <label for="pred_amount">Amount ($)</label>
                        <input type="number" id="pred_amount" name="pred_amount" value="150" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label for="pred_merchant_name">Merchant Name</label>
                        <input type="text" id="pred_merchant_name" name="pred_merchant_name" value="Amazon">
                    </div>
                    
                    <div class="form-group">
                        <label for="pred_merchant_category">Merchant Category</label>
                        <input type="text" id="pred_merchant_category" name="pred_merchant_category" value="Online Retail">
                    </div>
                    
                    <div class="form-group">
                        <label for="pred_country">Country</label>
                        <input type="text" id="pred_country" name="pred_country" value="US">
                    </div>
                    
                    <div class="form-group">
                        <label for="pred_timestamp">Timestamp</label>
                        <input type="datetime-local" id="pred_timestamp" name="pred_timestamp">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Predict with ML</button>
                </form>
                <div id="predictionStatus" class="status-message" style="margin-top: 1rem;"></div>
                <div id="predictionResults" style="margin-top: 1rem;"></div>
            </div>

            <!-- Model Information -->
            <div class="ml-section">
                <h2>ML Models Information</h2>
                <div class="ml-info">
                    <h3>Available Models</h3>
                    <ul>
                        <li><strong>Logistic Regression</strong> - Fast, interpretable linear model</li>
                        <li><strong>Random Forest</strong> - Ensemble tree-based model</li>
                        <li><strong>Ensemble</strong> - Combined predictions from both models</li>
                    </ul>
                    
                    <h3>Features Used</h3>
                    <ul>
                        <li>Transaction amount and Z-score</li>
                        <li>Time features (hour, day of week, day of month)</li>
                        <li>Merchant frequency and category</li>
                        <li>Geographic distance and country</li>
                        <li>Velocity (rapid transactions)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Credit Card Fraud Detection System</p>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ml_detector.js') }}"></script>
</body>
</html>
